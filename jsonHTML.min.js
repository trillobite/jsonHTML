function appendHTML(t,e,n){var r=new $.Deferred,i=function(){"function"==typeof t&&(t=t()),void 0===t.id&&(t.id=makeID()),arrdb.exists(t.id)?arrdb.get(t.id).append=n:arrdb.hash(t),t.parent=e,n?$(e)[n](parsetype(t.type)(t)):$(e).append(parsetype(t.type)(t)),void 0!==t.children&&$.each(t.children,function(){appendHTML(this,"#"+t.id)}),void 0!==t.functions&&$.each(t.functions,function(){this()}),r.resolve()};return i(),r.promise()}function $jConstruct(t,e){var n={type:void 0!==t?t:"div",children:[],functions:[]};return e&&jConstructObjectManipulations.dynamicPropertiesAdd(n,e),void 0===n.id&&(n.id=makeID()),jConstructObjectManipulations.basicPropertiesInsert(n,e),n}var micronDB=function(){return{db:[],hashTraverse:function(t,e){if(this.db[t]){for(var n=0;n<this.db[t].length;++n){var r=e(this.db[t][n]);if(r)return r}return!1}return!1},calcIndex:function(t){for(var e=0,n=0;n<t.length;++n)e+=t.charCodeAt(n);return e%50},exists:function(t){var e=this.calcIndex(t);return this.hashTraverse(e,function(e){return e.id==t?!0:void 0})},hash:function(t){if(this.exists(t))return!1;var e=this.calcIndex(t.id);return this.db[e]?(this.db[e][this.db[e].length]=t,!0):(this.db[e]=[],this.db[e][this.db[e].length]=t,!0)},get:function(t){var e=this.calcIndex(t);return this.hashTraverse(e,function(e){return e.id==t?e:void 0})},remove:function(t){var e=this.calcIndex(t);if(this.db[e])for(var n=0;n<this.db[e].length;++n)if(this.db[e][n])return delete this.db[e][n]},match:{where:function(t,e){for(var n in e)if("undefined"!=typeof t[n])if("function"==typeof t[n]){if(t[n](e[n])===!0)return e}else if(e[n]==t[n])return e;return!1}},traverse:function(t,e,n){var r=function(t,n){for(var i=[],o=0;o<n.length;++o)if(Array.isArray(n[o])){var a=r(t,n[o]);a.length>0&&(Array.isArray(a)&&a.length<2?i[i.length]=a[0]:i[i.length]=a)}else e(t,n[o])&&(i[i.length]=e(t,n[o]));return i},i=[],o=0,a=function(t,e,n,a){"undefined"!=typeof n[a]&&"number"!=typeof a&&(o?i.length>0&&(i=r(t,i)):i=r(t,e)),++o},s=function(t,e,n,o){if("undefined"!=typeof n[o]&&"number"!=typeof o){var a=r(t,e);if(i.length>0)for(var s=function(t,e){for(var n=0;n<e.length;++n)if(e[n]==t)return!0;return!1},d=0;d<a.length;++d)s(a[d],i)||(i[i.length]=a[d]);else i=r(t,e)}};for(var d in t){"$and"==d&&(o=0);var u={};if(u[d]=t[d],"$or"==d||"$and"==d)for(var c in u[d]){var f={};f[c]=u[d][c],"$or"==d?s(f,n,u[d],c):a(f,n,u[d],c)}else a(u,n,t,d)}return i},insert:function(t){this.hash(t)},query:function(t){var e;for(var n in t)"undefined"!=typeof this.match[n]&&(e=void 0===e?this.traverse(t[n],this.match[n],this.db):this.traverse(t[n],this.match[n],e));return e}}},arrdb=new micronDB,makeID=function(){for(var t="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;12>n;n++)t+=e.charAt(Math.floor(Math.random()*e.length));return t},parsetype=function(t){function e(t){var e="";for(var n in t){var r=n.toString();"string"==typeof t[n]&&"text"!=n&&"type"!=n&&(e+=" "+r+'="'+t[n]+'"')}return e}var n={button:function(t){var n={start:'<button type="button"',end:void 0!==t.text?">"+t.text+"</button>":"></button>"};return n.start+e(t)+n.end},checkbox:function(t){var n={start:'<input type="checkbox"',end:">"+(void 0!==t.text?t.text:"")+"<br>"};return n.start+e(t)+n.end},generic:function(t){var n={start:"<"+t.type,end:void 0!==t.text?">"+t.text+"</"+t.type+">":"></"+t.type+">"};return n.start+e(t)+n.end},html:function(t){return t.data},image:function(t){var n={start:"<img src="+t.src+' alt="'+t.text,end:">"};return n.start+e(t)+n.end},input:function(t){var n={start:"<input",end:"/>"};return n.start+e(t)+n.end},spinner:function(t){var n={start:void 0!==t.text?t.text+'<input type="number"':'<input type="number"',end:"/>"};return n.start+e(t)+n.end},textbox:function(t){var n={start:'<input type="text"',end:void 0!==t.text?' value="'+t.text+'">':">"};return n.start+e(t)+n.end}};return void 0!==n[t]?n[t]:n.generic},jConstructObjectManipulations={textStyling:function(t){return{hyperlink:function(e){return t.text="<a href="+e+">"+t.text+"</a>",this},bold:function(){return t.text="<b>"+t.text+"</b>",this},italicize:function(){return t.text="<i>"+t.text+"</i>",this},strong:function(){return t.text="<strong>"+t.text+"</strong>",this},heading:function(e){return t.text="<h"+e+">"+t.text+"</h"+e+">",t},paragraph:function(){return t.text="<p>"+t.text+"</p>",t}}},basicPropertiesInsert:function(t,e){t.addChild=function(t){return this.children[this.children.length]=t,this},t.addFunction=function(t){return this.functions[this.functions.length]=t,this},t.appendTo=function(t,e){var n,r=new $.Deferred;return n="object"==typeof t?"#"+t.id:t,appendHTML(this,n,e).done(function(){r.resolve()}),this.state=r,this},t.event=function(e,n){var r="#"+this.id;return $(r)[0]?n?$(r)[e](n):$(r)[e]():n?t.addFunction(function(){$(r)[e](n)}):t.addFunction(function(){$(r)[e]()}),this},t.css=function(t){var e="#"+this.id;if($(e)[0]){if(!t)return $(e)[0].style;$(e).css(t)}else{if(!t)return $(e)[0].style;this.addFunction(function(){$(e).css(t)})}return this},t.editProperty=function(e){return jConstructObjectManipulations.dynamicPropertiesAdd(t,e),this},t.remove=function(){var t=this.id,e=document.getElementById(t);if(e){for(;e.firstChild;)e.removeChild(e.firstChild);$("#"+t).remove()}else console.log(t,"object does not exist, or has already been removed");return this},t.textProperties=function(e,n){var r=jConstructObjectManipulations.textStyling(t);return n?r[e](n):r[e](),this},t.refresh=function(){var e=new $.Deferred;return t.parent.length>0?(t.remove(),t.appendTo(t.parent,arrdb.get(t.id).append).state.done(function(){e.resolve()})):e.reject("Error: Parent of the object not defined. Was it rendered to the DOM yet?"),this.state=e,this}},dynamicPropertiesAdd:function(t,e){for(var n in e)t[n]=e[n];return this}},toadFish={};toadFish.create2DArray=function(t){for(var e=[],n=0;t>n;++n)e[n]=[];return e},toadFish.structure=function(t,e){for(var n=$jConstruct("div",{collectionName:e}).css({clear:"left","float":"left",display:"block"}),r=0;r<t.length;++r){var i=$jConstruct("div");t[r].length?i.css({"float":"left"}):i.addChild(t[r]);for(var o=0;o<t[r].length;++o)i.addChild(t[r][o]);n.addChild(i)}return n.getCell=function(t,e){return n.children[t].children[e]},n.global=function(t,e,r){for(var i=0;i<n.children.length;++i)for(var o=0;o<n.children[i].length;++o)n.getCell(i,o)[t](e,r)},n},toadFish.tiles=function(t,e){for(var n=$jConstruct("div",{collectionName:e}).css({clear:"left","float":"left",display:"block"}),r=0;r<t.length;++r){var i=$jConstruct("div").addChild($jConstruct("div",t[r]));n.addChild(i)}return n.getTile=function(t){return n.children[t].children[0]},n.removeTile=function(t){var e=n.getTile(t);$("#"+e.id).remove(),arrdb.remove(e.id)},n.updateTiles=function(e,r,i){for(var o=0;o<t.length;++o)n.getTile(o)[e](r,i)},n},toadFish.grid=function(t,e,n){e++,t++;for(var r=toadFish.tiles(Array(t),{collectionName:n}).css({width:"auto",height:"auto"}),i=0;t>i;++i){r.children[i]=toadFish.tiles(Array(e),n+"row"+i.toString());for(var o=0;e>o;++o)r.children[i].children[o].css({"float":"left"})}return r.getCell=function(t,e){return r.children[t].children[e]},r.removeCell=function(t,e){var n=r.getCell(t,e);$("#"+n.id).remove(),arrdb.remove(n.id)},r.removeRow=function(t){r.removeTile(t)},r.rowAssign=function(t,e,n,i){r.children[t].updateTiles(e,n,i)},r.globalAssign=function(e,n,i){for(var o=0;t>o;++o)r.rowAssign(o,e,n,i)},r};
/*  View full license in README.md
             )
c            (
o        )   )
p        (             v1.3
y    .---------------------.
r    |        _____        |___      
i    |     .'`_,-._`'.      __ \
g    |    /  ( [ ] )  \    |  ||
h    |   /.-""`( )`""-.\   |  ||
t    |  ' <'```(.)```'> '  | _||
     |    <'```(.)```'>    |/ _/
2    |     <'``(.)``'>      ./
0    |      <``\_/``>      |
1    |       `'---'`       |
6    \github.com/trillobite/              
       \_________________/      Keep it black, keep it free.*/