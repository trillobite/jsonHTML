function appendHTML(t,n,e){var r=new $.Deferred,i=function(){"function"==typeof t&&(t=t()),void 0===t.id&&(t.id=makeID()),arrdb.exists(t.id)?arrdb.get(t.id).append=e:arrdb.hash(t),t.parent=n,e?$(n)[e](parsetype(t.type)(t)):$(n).append(parsetype(t.type)(t)),void 0!==t.children&&$.each(t.children,function(){appendHTML(this,"#"+t.id)}),void 0!==t.functions&&$.each(t.functions,function(){this()}),r.resolve()};return i(),r.promise()}function $jConstruct(t,n){var e={type:void 0!==t?t:"div",children:[],functions:[]};return n&&jConstructObjectManipulations.dynamicPropertiesAdd(e,n),void 0===e.id&&(e.id=makeID()),jConstructObjectManipulations.basicPropertiesInsert(e,n),e}var micronDB=function(){return{db:[],hashTraverse:function(t,n){if(this.db[t]){for(var e=0;e<this.db[t].length;++e){var r=n(this.db[t][e]);if(r)return r}return!1}return!1},calcIndex:function(t){for(var n=0,e=0;e<t.length;++e)n+=t.charCodeAt(e);return n%50},exists:function(t){var n=this.calcIndex(t);return this.hashTraverse(n,function(n){return n.id==t?!0:void 0})},hash:function(t){if(this.exists(t))return!1;var n=this.calcIndex(t.id);return this.db[n]?(this.db[n][this.db[n].length]=t,!0):(this.db[n]=[],this.db[n][this.db[n].length]=t,!0)},get:function(t){var n=this.calcIndex(t);return this.hashTraverse(n,function(n){return n.id==t?n:void 0})},remove:function(t){var n=this.calcIndex(t);if(this.db[n])for(var e=0;e<this.db[n].length;++e)if(this.db[n][e])return delete this.db[n][e]},match:{where:function(t,n){for(var e in n)if("undefined"!=typeof t[e])if("function"==typeof t[e]){if(t[e](n[e])===!0)return n}else if(n[e]==t[e])return n;return!1}},traverse:function(t,n,e){var r=function(t,e){for(var i=[],o=0;o<e.length;++o)if(Array.isArray(e[o])){var s=r(t,e[o]);s.length>0&&(Array.isArray(s)&&s.length<2?i[i.length]=s[0]:i[i.length]=s)}else n(t,e[o])&&(i[i.length]=n(t,e[o]));return i},i=[],o=0,s=function(t,n,e,s){"undefined"!=typeof e[s]&&"number"!=typeof s&&(o?i.length>0&&(i=r(t,i)):i=r(t,n)),++o},a=function(t,n,e,o){if("undefined"!=typeof e[o]&&"number"!=typeof o){var s=r(t,n);if(i.length>0)for(var a=function(t,n){for(var e=0;e<n.length;++e)if(n[e]==t)return!0;return!1},u=0;u<s.length;++u)a(s[u],i)||(i[i.length]=s[u]);else i=r(t,n)}};for(var u in t){"$and"==u&&(o=0);var d={};if(d[u]=t[u],"$or"==u||"$and"==u)for(var c in d[u]){var f={};f[c]=d[u][c],"$or"==u?a(f,e,d[u],c):s(f,e,d[u],c)}else s(d,e,t,u)}return i},insert:function(t){this.hash(t)},query:function(t){var n;for(var e in t)"undefined"!=typeof this.match[e]&&(n=void 0===n?this.traverse(t[e],this.match[e],this.db):this.traverse(t[e],this.match[e],n));return n}}},arrdb=new micronDB,makeID=function(){for(var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=0;12>e;e++)t+=n.charAt(Math.floor(Math.random()*n.length));return t},parsetype=function(t){function n(t){var n="";for(var e in t){var r=e.toString();"string"==typeof t[e]&&"text"!=e&&"type"!=e&&(n+=" "+r+'="'+t[e]+'"')}return n}var e={button:function(t){var e={start:'<button type="button"',end:void 0!==t.text?">"+t.text+"</button>":"></button>"};return e.start+n(t)+e.end},checkbox:function(t){var e={start:'<input type="checkbox"',end:">"+(void 0!==t.text?t.text:"")+"<br>"};return e.start+n(t)+e.end},generic:function(t){var e={start:"<"+t.type,end:void 0!==t.text?">"+t.text+"</"+t.type+">":"></"+t.type+">"};return e.start+n(t)+e.end},html:function(t){return t.data},image:function(t){var e={start:"<img src="+t.src+' alt="'+t.text,end:">"};return e.start+n(t)+e.end},input:function(t){var e={start:"<input",end:"/>"};return e.start+n(t)+e.end},spinner:function(t){var e={start:void 0!==t.text?t.text+'<input type="number"':'<input type="number"',end:"/>"};return e.start+n(t)+e.end},textbox:function(t){var e={start:'<input type="text"',end:void 0!==t.text?' value="'+t.text+'">':">"};return e.start+n(t)+e.end}};return void 0!==e[t]?e[t]:e.generic},jConstructObjectManipulations={textStyling:function(t){return{hyperlink:function(n){return t.text="<a href="+n+">"+t.text+"</a>",this},bold:function(){return t.text="<b>"+t.text+"</b>",this},italicize:function(){return t.text="<i>"+t.text+"</i>",this},strong:function(){return t.text="<strong>"+t.text+"</strong>",this},heading:function(n){return t.text="<h"+n+">"+t.text+"</h"+n+">",t},paragraph:function(){return t.text="<p>"+t.text+"</p>",t}}},basicPropertiesInsert:function(t,n){t.addChild=function(t){return this.children[this.children.length]=t,this},t.addFunction=function(t){return this.functions[this.functions.length]=t,this},t.appendTo=function(t,n){var e,r=new $.Deferred;return e="object"==typeof t?"#"+t.id:t,appendHTML(this,e,n).done(function(){r.resolve()}),this.state=r,this},t.event=function(n,e){var r="#"+this.id;return $(r)[0]?e?$(r)[n](e):$(r)[n]():e?t.addFunction(function(){$(r)[n](e)}):t.addFunction(function(){$(r)[n]()}),this},t.css=function(t){var n="#"+this.id;if($(n)[0]){if(!t)return $(n)[0].style;$(n).css(t)}else{if(!t)return $(n)[0].style;this.addFunction(function(){$(n).css(t)})}return this},t.editProperty=function(n){return jConstructObjectManipulations.dynamicPropertiesAdd(t,n),this},t.remove=function(){var t=this.id,n=document.getElementById(t);if(n){for(;n.firstChild;)n.removeChild(n.firstChild);$("#"+t).remove()}else console.log(t,"object does not exist, or has already been removed");return this},t.textProperties=function(n,e){var r=jConstructObjectManipulations.textStyling(t);return e?r[n](e):r[n](),this},t.refresh=function(){var n=new $.Deferred;return t.parent.length>0?(t.remove(),t.appendTo(t.parent,arrdb.get(t.id).append).state.done(function(){n.resolve()})):n.reject("Error: Parent of the object not defined. Was it rendered to the DOM yet?"),this.state=n,this}},dynamicPropertiesAdd:function(t,n){for(var e in n)t[e]=n[e];return this}};
/*           )
c            (
o        )   )
p        (
y    .---------------------.
r    |        _____        |___      
i    |     .'`_,-._`'.      __ \
g    |    /  ( [ ] )  \    |  ||
h    |   /.-""`( )`""-.\   |  ||
t    |  ' <'```(.)```'> '  | _||
     |    <'```(.)```'>    |/ _/
2    |     <'``(.)``'>      ./
0    |      <``\_/``>      |
1    |       `'---'`       |
6    \github.com/trillobite/              
       \_________________/      Keep it black*/